
<ion-view title="Store Locator"  id="StoreLocator" cache-view="false">
    <ion-nav-buttons side="left">
        <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
        <!--button ng-click="openDrawer()" class="button-drawer button button-icon icon ion-navicon" ng-show="false">Open</button-->
    </ion-nav-buttons>
    <ion-nav-buttons side="right">
        <button class="button button-icon icon ion-grid" ng-click="switchMode('list')" ng-if="mode!='list'"></button>
        <button class="button button-icon icon ion-map" ng-click="switchMode('map')" ng-if="mode!='map'"></button>
    </ion-nav-buttons>

    <ion-content class="has-header " id="app-content">
        
        <div style="width: 100%; height: 100%" data-tap-disabled="true" ng-if="mode == 'map'"> 
            <map id="mainGmap" draggable="true" center="[{{lat}}, {{lng}}]" zoom="{{map.zoom}}" zoom-to-include-markers="auto"  >
                <marker ng-repeat="store in stores" class="store-info" position="{{store.Latitude}},{{store.Longitude}}" icon= '{url:    "img/logo_small.png" }'   id='m{{store.StoreID}}' on-click="showStore({{store.StoreID}})">               
                    </marker>             
                    
            </map>
        </div>    
        <ul class="list" ng-if="mode == 'list'">
            <li class="item store-list" ng-repeat="store in stores" >
                <div class="row">
                    <div class="col image">
                        <img ng-src="{{getLogo(store)}}"/>
                         <h3 class="title">{{store.Name}}</h3>                        
                        <div>{{store.Address}} {{store.DistrictName}}, {{store.CityName}} </div>
                    </div>
                    <div class="col info">
                        <button class="button button-small  button-positive" ng-click="onSelectStore(store.StoreID)" ng-show="false">
                            Select Store
                        </button>
                        <button class="button button-small  button-positive" ng-click="goTo('app.storeinfo', {id: store.StoreID})">
                            More Info
                        </button>
                    </div>
                </div>
            </li>
            <li class="item store-list noitems" ng-if="stores && stores.length == 0">
                No results found.
            </li>

        </ul>
        
    </ion-content>
    <div class="tabs tabs-icon-top " ng-show="true">
        <a class="tab-item"  ng-class="{selected: selectedTab == 'favorite'}" ng-click="switchStoreType('favorite')">
            <i class="icon ion-heart"></i>
            Favorite Brands
        </a>
        <a class="tab-item" ng-class="{selected: selectedTab == 'lucky'}" ng-click="switchStoreType('lucky')">
            <i class="icon ion-star"></i>
            Lucky Day
        </a>
        <a class="tab-item" ng-class="{selected: selectedTab == 'history'}" ng-click="switchStoreType('history')">
            <i class="icon ion-clock" ></i>
            Histories
        </a>
    </div>
</ion-view>
